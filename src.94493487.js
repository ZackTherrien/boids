parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"rStK":[function(require,module,exports) {
"use strict";var e,t;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.STATIC=0]="STATIC",e[e.DYNAMIC=1]="DYNAMIC"}(e=exports.LayerType||(exports.LayerType={})),function(e){e[e.FROM_ORIGIN=0]="FROM_ORIGIN",e[e.FROM_CENTER=1]="FROM_CENTER"}(t=exports.ResizeMethod||(exports.ResizeMethod={}));
},{}],"hsb8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../types");class r{constructor(){this.staticLayers=[],this.dynamicLayers=[],this.shouldRender=!0,this.lastFrameRenderedTime=null,this.renderingId=null,this.requestFrameA=this.requestFrameA.bind(this),this.requestFrameB=this.requestFrameB.bind(this)}getLayer(r,s){return s===e.LayerType.DYNAMIC?this.dynamicLayers.find(e=>e.layerIndex===r)||null:this.staticLayers.find(e=>e.layerIndex===r)||null}registerLayer(r){r.layerType===e.LayerType.DYNAMIC?this.dynamicLayers.push(r):this.staticLayers.push(r)}start(){this.shouldRender=!0,this.renderingId=window.requestAnimationFrame(this.requestFrameA)}stop(){this.shouldRender=!1,this.renderingId&&window.cancelAnimationFrame(this.renderingId)}requestFrameA(e){this.render(e),this.shouldRender&&(this.renderingId=window.requestAnimationFrame(this.requestFrameB))}requestFrameB(e){this.render(e),this.shouldRender&&(this.renderingId=window.requestAnimationFrame(this.requestFrameA))}render(e=0){this.lastFrameRenderedTime||(this.lastFrameRenderedTime=e);const r=e-this.lastFrameRenderedTime;this.lastFrameRenderedTime=e;for(let s=0;s<this.dynamicLayers.length;s++)this.dynamicLayers[s].update(r),this.dynamicLayers[s].render()}}exports.default=r;
},{"../types":"rStK"}],"xNbE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../types");class e{constructor(t,e,i,s,h=0,n=0){this.layerIndex=t,this.layerType=e,this.entities=[],this.width=void 0===i?document.body.clientWidth+1:i,this.height=void 0===s?document.body.clientHeight+1:s,this.x=h,this.y=n;const o=document.createElement("canvas");o.style.position="absolute",o.style.zIndex=`${this.layerIndex}`,o.style.display="inline",document.body.appendChild(o);const r=o.getContext("2d");if(!r)throw new Error("Could not initialize canvas 2D context.");this.context=r,this.context.translate(-.5,-.5),this.resize(this.width,this.height),this.setPosition(this.x,this.y)}resize(e,i,s=t.ResizeMethod.FROM_ORIGIN){let h=0,n=0;s===t.ResizeMethod.FROM_CENTER&&(h=(this.width-e)/2,n=(this.height-i)/2),this.width=e,this.height=i,this.context.canvas.width=this.width,this.context.canvas.height=this.height,this.setPosition(this.x+h,this.y+n)}setPosition(t,e){if(this.x=t,this.y=e,!this._isLayerWithinBounds())throw new Error("Cannot position and resize a layer outside of document body.");this.context.canvas.style.left=`${this.x}px`,this.context.canvas.style.top=`${this.y}px`}addEntity(e){if(!this._entityIsRenderable(e))throw new Error("All entities must have a render function.");if(this.layerType===t.LayerType.DYNAMIC&&!this._entityIsUpdatable(e))throw new Error("All entities of dynamic layers must have an updater function.");this.entities.push(e)}removeEntity(t){const e=this.entities.indexOf(t);-1!==e&&this.entities.splice(e,1)}getWidth(){return this.width}getHeight(){return this.height}getX(){return this.x}getY(){return this.y}getContext(){return this.context}clear(){this.context.clearRect(-1,-1,this.width,this.height)}update(e){if(this.layerType===t.LayerType.DYNAMIC)for(let t=0;t<this.entities.length;t++)this.entities[t].update(e)}render(){this.clear();for(let t=0;t<this.entities.length;t++)this.entities[t].render(this.context)}_entityIsRenderable(t){return Boolean(t.render)}_entityIsUpdatable(t){return Boolean(t.update)}_isLayerWithinBounds(){return this.width+this.x>document.body.clientWidth||this.height+this.y>document.body.clientHeight||this.x<0||this.y<0}}exports.RenderingLayer=e;
},{"../types":"rStK"}],"Uo8W":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=r(require("./Engine"));var n=require("./RenderingLayer");exports.RenderingLayer=n.RenderingLayer,e(require("./types")),exports.default=t.default;
},{"./Engine":"hsb8","./RenderingLayer":"xNbE","./types":"rStK"}],"pOc1":[function(require,module,exports) {
"use strict";var I;Object.defineProperty(exports,"__esModule",{value:!0}),exports.BIRD_COUNT=500,exports.BIRD_WIDTH=4,exports.BIRD_HEIGHT=2,exports.BIRD_SPEED=.1,exports.BIRD_VISUAL_RANGE=75,exports.BIRD_RETURN_VELOCITY=0,exports.BIRD_SEPARATION_DISTANCE=2*Math.sqrt(exports.BIRD_WIDTH*exports.BIRD_WIDTH+exports.BIRD_HEIGHT*exports.BIRD_HEIGHT),exports.BIRD_SEPARATION_EAGERNESS=.2,exports.BIRD_COHESION_EAGERNESS=.01,exports.BIRD_ALIGNMENT_EAGERNESS=.1,exports.SIGHT_ANGLE=.5*Math.PI,exports.SIGHT_RANGE=50,function(I){I[I.BACKGROUND=0]="BACKGROUND",I[I.BIRDS=1]="BIRDS"}(I=exports.LayerIndex||(exports.LayerIndex={}));
},{}],"Ne1t":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.x1=n,this.x2=i}return n(e,[{key:"null",value:function(){this.x1=0,this.x2=0}},{key:"add",value:function(t){return this.x1+=t.x1,this.x2+=t.x2,this}},{key:"sub",value:function(t){return this.x1-=t.x1,this.x2-=t.x2,this}},{key:"multiply",value:function(t){return this.x1*=t,this.x2*=t,this}},{key:"divide",value:function(t){return this.x1/=t,this.x2/=t,this}},{key:"normalize",value:function(){var t=this.magnitude();return 0===t?e.ZERO():this.divide(t)}},{key:"magnitude",value:function(){return Math.sqrt(this.x1*this.x1+this.x2*this.x2)}},{key:"distance",value:function(t){return Math.sqrt(Math.pow(this.x1-t.x1,2)+Math.pow(this.x2-t.x2,2))}},{key:"clone",value:function(){return new e(this.x1,this.x2)}}],[{key:"ZERO",value:function(){return new e(0,0)}},{key:"ONE",value:function(){return new e(1,1)}}]),e}();exports.default=i,i.CONST_ZERO=i.ZERO(),i.CONST_ONE=i.ONE();
},{}],"fpaa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromDegree=function(t){return t*Math.PI/180},exports.getAngle=function(t){return Math.atan2(t.x2,t.x1)},exports.flipVector=function(t,e,r){var n=exports.getAngle(t),o=0;"x"===e&&"left"===r?o=0:"x"===e&&"right"===r?o=Math.PI:"y"===e&&"up"===r?o=.5*Math.PI:"y"===e&&"down"===r&&(o=1.5*Math.PI);var a=2*o-Math.PI-n;t.x1=Math.cos(a),t.x2=Math.sin(a)};
},{}],"HUw3":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var o=i[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),t}var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var s=o(require("../Vector2D")),n=require("../constants"),a=require("../helpers"),u=function(){function i(e,o,u,l,r){t(this,i),this.boids=e,this.maxX=l,this.maxY=r,this.position=new s.default(o,u);var c=a.fromDegree(360*Math.random());this.velocity=new s.default(Math.cos(c),Math.sin(c)).normalize().multiply(n.BIRD_SPEED),this.acceleration=s.default.ZERO(),this.cohesionAccumulator=s.default.ZERO(),this.separationAccumulator=s.default.ZERO(),this.alignmentAccumulator=s.default.ZERO()}return e(i,[{key:"resetAccumulators",value:function(){this.acceleration.null(),this.cohesionAccumulator.null(),this.separationAccumulator.null(),this.alignmentAccumulator.null()}},{key:"performManeuvers",value:function(t){this.resetAccumulators();for(var i=0,e=0;e<t.length;e++)t[e]!==this&&t[e].position.distance(this.position)<n.BIRD_VISUAL_RANGE&&(i+=1,this.accumulateCohesion(t[e]),this.accumulateSeparation(t[e]),this.accumulateAlignment(t[e]));0!==i&&this.acceleration.add(this.performCohesion(i)).add(this.performSeparation(i)).add(this.performAlignment(i)),this.checkBoundary(),this.checkVelocity()}},{key:"accumulateCohesion",value:function(t){this.cohesionAccumulator.add(t.position)}},{key:"accumulateSeparation",value:function(t){var i=this.position.clone().sub(t.position),e=i.magnitude();e<=n.BIRD_SEPARATION_DISTANCE&&this.separationAccumulator.add(i.divide(e))}},{key:"accumulateAlignment",value:function(t){this.alignmentAccumulator.add(t.velocity)}},{key:"performCohesion",value:function(t){return this.cohesionAccumulator.divide(t).sub(this.position).normalize().multiply(n.BIRD_SPEED).sub(this.velocity).multiply(n.BIRD_COHESION_EAGERNESS)}},{key:"performSeparation",value:function(t){return this.separationAccumulator.divide(t).normalize().multiply(n.BIRD_SPEED).sub(this.velocity).multiply(n.BIRD_SEPARATION_EAGERNESS)}},{key:"performAlignment",value:function(t){return this.alignmentAccumulator.divide(t).normalize().multiply(n.BIRD_SPEED).sub(this.velocity).multiply(n.BIRD_ALIGNMENT_EAGERNESS)}},{key:"checkPredators",value:function(){return this.boids.isRightClicked?this.boids.mouseLocation.clone().sub(this.position).divide(n.BIRD_COHESION_EAGERNESS).multiply(-1):s.default.CONST_ZERO}},{key:"checkGoals",value:function(){return this.boids.isLeftClicked?this.boids.mouseLocation.clone().sub(this.position).divide(n.BIRD_COHESION_EAGERNESS):s.default.CONST_ZERO}},{key:"checkBoundary",value:function(){this.position.x1<0?this.position.x1=this.maxX:this.position.x1>this.maxX&&(this.position.x1=0),this.position.x2<0?this.position.x2=this.maxY:this.position.x2>this.maxY&&(this.position.x2=0)}},{key:"checkVelocity",value:function(){this.velocity.normalize().multiply(n.BIRD_SPEED)}},{key:"update",value:function(t){this.performManeuvers(this.boids.birds),this.position.add(this.velocity.clone().multiply(t)),this.velocity.add(this.acceleration)}},{key:"render",value:function(t){this.rotate(t),t.strokeStyle="red",t.beginPath(),t.moveTo(this.position.x1+n.BIRD_WIDTH/2,this.position.x2),t.lineTo(this.position.x1-n.BIRD_WIDTH/2,this.position.x2+n.BIRD_HEIGHT/2),t.lineTo(this.position.x1-n.BIRD_WIDTH/2,this.position.x2-n.BIRD_HEIGHT/2),t.closePath(),t.stroke(),this.unrotate(t)}},{key:"rotate",value:function(t){t.translate(this.position.x1,this.position.x2),t.rotate(a.getAngle(this.velocity)),t.translate(-this.position.x1,-this.position.x2)}},{key:"unrotate",value:function(t){t.translate(this.position.x1,this.position.x2),t.rotate(-a.getAngle(this.velocity)),t.translate(-this.position.x1,-this.position.x2)}}]),i}();exports.default=u;
},{"../Vector2D":"Ne1t","../constants":"pOc1","../helpers":"fpaa"}],"WIiV":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var s=n(require("@zacktherrien/typescript-render-engine")),a=require("./constants"),o=r(require("./Bird")),u=r(require("./Vector2D")),d=function(){function t(){e(this,t),this.background=new s.RenderingLayer(a.LayerIndex.BACKGROUND,s.LayerType.STATIC),this.birdLayer=new s.RenderingLayer(a.LayerIndex.BIRDS,s.LayerType.DYNAMIC),this.birds=[];for(var i=0;i<a.BIRD_COUNT;i++){var n=new o.default(this,Math.random()*this.birdLayer.getWidth(),Math.random()*this.birdLayer.getHeight(),this.birdLayer.getWidth(),this.birdLayer.getHeight());this.birds.push(n),this.birdLayer.addEntity(n)}this.isLeftClicked=!1,this.isRightClicked=!1,this.mouseLocation=u.default.ZERO(),this.engine=new s.default,this.engine.registerLayer(this.background),this.engine.registerLayer(this.birdLayer),this.engine.start(),document.addEventListener("mousedown",this.handleMouseDown.bind(this)),document.addEventListener("mouseup",this.handleMouseUp.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this)),document.addEventListener("contextmenu",function(e){return e.preventDefault()})}return i(t,[{key:"handleMouseDown",value:function(e){0===e.button?this.isLeftClicked=!0:(this.isRightClicked=!0,e.preventDefault(),e.stopImmediatePropagation()),this.mouseLocation=new u.default(e.offsetX,e.offsetY)}},{key:"handleMouseMove",value:function(e){this.mouseLocation=new u.default(e.offsetX,e.offsetY)}},{key:"handleMouseUp",value:function(){this.isLeftClicked=!1,this.isRightClicked=!1,this.mouseLocation=u.default.ZERO()}}]),t}();exports.default=d;
},{"@zacktherrien/typescript-render-engine":"Uo8W","./constants":"pOc1","./Bird":"HUw3","./Vector2D":"Ne1t"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./Boids"));function i(){var e=new t.default;window.boids=e}window.addEventListener("load",i);
},{"./Boids":"WIiV"}]},{},["QCba"], null)
//# sourceMappingURL=/boids/src.94493487.js.map