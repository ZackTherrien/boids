parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"rStK":[function(require,module,exports) {
"use strict";var e,t;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.STATIC=0]="STATIC",e[e.DYNAMIC=1]="DYNAMIC"}(e=exports.LayerType||(exports.LayerType={})),function(e){e[e.FROM_ORIGIN=0]="FROM_ORIGIN",e[e.FROM_CENTER=1]="FROM_CENTER"}(t=exports.ResizeMethod||(exports.ResizeMethod={}));
},{}],"hsb8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("../types");class r{constructor(){this.staticLayers=[],this.dynamicLayers=[],this.shouldRender=!0,this.lastFrameRenderedTime=null,this.renderingId=null,this.requestFrameA=this.requestFrameA.bind(this),this.requestFrameB=this.requestFrameB.bind(this)}getLayer(r,s){return s===e.LayerType.DYNAMIC?this.dynamicLayers.find(e=>e.layerIndex===r)||null:this.staticLayers.find(e=>e.layerIndex===r)||null}registerLayer(r){r.layerType===e.LayerType.DYNAMIC?this.dynamicLayers.push(r):this.staticLayers.push(r)}start(){this.shouldRender=!0,this.renderingId=window.requestAnimationFrame(this.requestFrameA)}stop(){this.shouldRender=!1,this.renderingId&&window.cancelAnimationFrame(this.renderingId)}requestFrameA(e){this.render(e),this.shouldRender&&(this.renderingId=window.requestAnimationFrame(this.requestFrameB))}requestFrameB(e){this.render(e),this.shouldRender&&(this.renderingId=window.requestAnimationFrame(this.requestFrameA))}render(e=0){this.lastFrameRenderedTime||(this.lastFrameRenderedTime=e);const r=e-this.lastFrameRenderedTime;this.lastFrameRenderedTime=e;for(let s=0;s<this.dynamicLayers.length;s++)this.dynamicLayers[s].update(r),this.dynamicLayers[s].render()}}exports.default=r;
},{"../types":"rStK"}],"xNbE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const t=require("../types");class e{constructor(t,e,i,s,h=0,n=0){this.layerIndex=t,this.layerType=e,this.entities=[],this.width=void 0===i?document.body.clientWidth+1:i,this.height=void 0===s?document.body.clientHeight+1:s,this.x=h,this.y=n;const o=document.createElement("canvas");o.style.position="absolute",o.style.zIndex=`${this.layerIndex}`,o.style.display="inline",document.body.appendChild(o);const r=o.getContext("2d");if(!r)throw new Error("Could not initialize canvas 2D context.");this.context=r,this.context.translate(-.5,-.5),this.resize(this.width,this.height),this.setPosition(this.x,this.y)}resize(e,i,s=t.ResizeMethod.FROM_ORIGIN){let h=0,n=0;s===t.ResizeMethod.FROM_CENTER&&(h=(this.width-e)/2,n=(this.height-i)/2),this.width=e,this.height=i,this.context.canvas.width=this.width,this.context.canvas.height=this.height,this.setPosition(this.x+h,this.y+n)}setPosition(t,e){if(this.x=t,this.y=e,!this._isLayerWithinBounds())throw new Error("Cannot position and resize a layer outside of document body.");this.context.canvas.style.left=`${this.x}px`,this.context.canvas.style.top=`${this.y}px`}addEntity(e){if(!this._entityIsRenderable(e))throw new Error("All entities must have a render function.");if(this.layerType===t.LayerType.DYNAMIC&&!this._entityIsUpdatable(e))throw new Error("All entities of dynamic layers must have an updater function.");this.entities.push(e)}removeEntity(t){const e=this.entities.indexOf(t);-1!==e&&this.entities.splice(e,1)}getWidth(){return this.width}getHeight(){return this.height}getX(){return this.x}getY(){return this.y}getContext(){return this.context}clear(){this.context.clearRect(-1,-1,this.width,this.height)}update(e){if(this.layerType===t.LayerType.DYNAMIC)for(let t=0;t<this.entities.length;t++)this.entities[t].update(e)}render(){this.clear();for(let t=0;t<this.entities.length;t++)this.entities[t].render(this.context)}_entityIsRenderable(t){return Boolean(t.render)}_entityIsUpdatable(t){return Boolean(t.update)}_isLayerWithinBounds(){return this.width+this.x>document.body.clientWidth||this.height+this.y>document.body.clientHeight||this.x<0||this.y<0}}exports.RenderingLayer=e;
},{"../types":"rStK"}],"Uo8W":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=r(require("./Engine"));var n=require("./RenderingLayer");exports.RenderingLayer=n.RenderingLayer,e(require("./types")),exports.default=t.default;
},{"./Engine":"hsb8","./RenderingLayer":"xNbE","./types":"rStK"}],"pOc1":[function(require,module,exports) {
"use strict";var I;Object.defineProperty(exports,"__esModule",{value:!0}),function(I){I[I.BACKGROUND=0]="BACKGROUND",I[I.BIRDS=1]="BIRDS"}(I=exports.LayerIndex||(exports.LayerIndex={})),exports.BIRD_COUNT=500,exports.BIRD_WIDTH=4,exports.BIRD_HEIGHT=2,exports.BIRD_SPEED=.1,exports.BIRD_VISUAL_RANGE=75,exports.MAX_BIRD_ENERGY=1e3,exports.ACCELERATION_ENERGY_COST=.01,exports.LIVING_ENERGY_COST=.001,exports.BIRD_SEPARATION_DISTANCE=2*Math.sqrt(exports.BIRD_WIDTH*exports.BIRD_WIDTH+exports.BIRD_HEIGHT*exports.BIRD_HEIGHT),exports.BIRD_SEPARATION_EAGERNESS=.2,exports.BIRD_COHESION_EAGERNESS=.01,exports.BIRD_ALIGNMENT_EAGERNESS=.1,exports.BIRD_START_HUNGER_ENERGY=exports.MAX_BIRD_ENERGY/2,exports.BIRD_EATING_SPEED=.05;
},{}],"Ne1t":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t(this,e),this.x1=n,this.x2=i}return n(e,[{key:"null",value:function(){this.x1=0,this.x2=0}},{key:"add",value:function(t){return this.x1+=t.x1,this.x2+=t.x2,this}},{key:"sub",value:function(t){return this.x1-=t.x1,this.x2-=t.x2,this}},{key:"multiply",value:function(t){return this.x1*=t,this.x2*=t,this}},{key:"divide",value:function(t){return this.x1/=t,this.x2/=t,this}},{key:"normalize",value:function(){var t=this.magnitude();return 0===t?e.ZERO():this.divide(t)}},{key:"magnitude",value:function(){return Math.sqrt(this.x1*this.x1+this.x2*this.x2)}},{key:"distance",value:function(t){return Math.sqrt(Math.pow(this.x1-t.x1,2)+Math.pow(this.x2-t.x2,2))}},{key:"clone",value:function(){return new e(this.x1,this.x2)}}],[{key:"ZERO",value:function(){return new e(0,0)}},{key:"ONE",value:function(){return new e(1,1)}}]),e}();exports.default=i,i.CONST_ZERO=i.ZERO(),i.CONST_ONE=i.ONE();
},{}],"fpaa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromDegree=function(t){return t*Math.PI/180},exports.getAngle=function(t){return Math.atan2(t.x2,t.x1)},exports.flipVector=function(t,e,r){var n=exports.getAngle(t),o=0;"x"===e&&"left"===r?o=0:"x"===e&&"right"===r?o=Math.PI:"y"===e&&"up"===r?o=.5*Math.PI:"y"===e&&"down"===r&&(o=1.5*Math.PI);var a=2*o-Math.PI-n;t.x1=Math.cos(a),t.x2=Math.sin(a)};
},{}],"ROma":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("../../Vector2D")),i=function e(i){var n=this;t(this,e),this.reset=function(){n.value.null()},this.bird=i,this.value=r.default.ZERO()};exports.default=i;
},{"../../Vector2D":"Ne1t"}],"Wf9G":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=l();return function(){var r,n=a(t);if(e){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var p=s(require("../../../Behavior/BirdBehavior")),y=require("../../../constants"),b=function(t){o(u,p.default);var r=i(u);function u(){return e(this,u),r.apply(this,arguments)}return n(u,[{key:"perform",value:function(t){return this.value.divide(t).sub(this.bird.position).normalize().multiply(y.BIRD_SPEED).sub(this.bird.velocity).multiply(y.BIRD_COHESION_EAGERNESS)}},{key:"accumulate",value:function(t){this.value.add(t.position)}}]),u}();exports.default=b;
},{"../../../Behavior/BirdBehavior":"ROma","../../../constants":"pOc1"}],"VT8H":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=l();return function(){var r,n=a(t);if(e){var o=a(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function a(t){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var p=s(require("../../../Behavior/BirdBehavior")),y=require("../../../constants"),b=function(t){o(u,p.default);var r=i(u);function u(){return e(this,u),r.apply(this,arguments)}return n(u,[{key:"perform",value:function(t){return this.value.divide(t).normalize().multiply(y.BIRD_SPEED).sub(this.bird.velocity).multiply(y.BIRD_ALIGNMENT_EAGERNESS)}},{key:"accumulate",value:function(t){this.value.add(t.velocity)}}]),u}();exports.default=b;
},{"../../../Behavior/BirdBehavior":"ROma","../../../constants":"pOc1"}],"hmNX":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&u(t,e)}function u(t,e){return(u=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=a();return function(){var r,n=l(t);if(e){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return c(this,r)}}function c(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?f(e):r}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var p=s(require("../../../Behavior/BirdBehavior")),y=require("../../../constants"),b=function(t){o(u,p.default);var r=i(u);function u(){return e(this,u),r.apply(this,arguments)}return n(u,[{key:"perform",value:function(t){return this.value.divide(t).normalize().multiply(y.BIRD_SPEED).sub(this.bird.velocity).multiply(y.BIRD_SEPARATION_EAGERNESS)}},{key:"accumulate",value:function(t){var e=this.bird.position.clone().sub(t.position),r=e.magnitude();r<=y.BIRD_SEPARATION_DISTANCE&&this.value.add(e.divide(r))}}]),u}();exports.default=b;
},{"../../../Behavior/BirdBehavior":"ROma","../../../constants":"pOc1"}],"Fdbi":[function(require,module,exports) {
"use strict";var A;Object.defineProperty(exports,"__esModule",{value:!0}),function(A){A[A.DEEP_WATER=0]="DEEP_WATER",A[A.SHORE_WATER=1]="SHORE_WATER",A[A.SAND=2]="SAND",A[A.SWAMP=3]="SWAMP",A[A.GRASSLAND=4]="GRASSLAND",A[A.RAIN_FOREST=5]="RAIN_FOREST",A[A.MOUNTAIN=6]="MOUNTAIN",A[A.SNOW_PEAK=7]="SNOW_PEAK"}(A=exports.SquareType||(exports.SquareType={}));
},{}],"tgyE":[function(require,module,exports) {
"use strict";var e;function r(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}Object.defineProperty(exports,"__esModule",{value:!0});var a=require("./Terrain/types");exports.BirdColor="#242124",exports.SquareColors=(r(e={},a.SquareType.DEEP_WATER,"#006B99"),r(e,a.SquareType.SHORE_WATER,"#008ECC"),r(e,a.SquareType.SAND,"#e5d8c1"),r(e,a.SquareType.SWAMP,"#555c45"),r(e,a.SquareType.GRASSLAND,"#bbcba0"),r(e,a.SquareType.RAIN_FOREST,"#92b29f"),r(e,a.SquareType.MOUNTAIN,"#AAAAAA"),r(e,a.SquareType.SNOW_PEAK,"#FFFFFF"),e);
},{"./Terrain/types":"Fdbi"}],"CgyF":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var e=function e(s){var i=this;t(this,e),this.reset=function(){i.value=0},this.bird=s,this.value=0};exports.default=e;
},{}],"tvWH":[function(require,module,exports) {
"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=a();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function f(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?c(t):r}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var p=s(require("../../../Behavior/SelfBehavior")),y=require("../../../constants"),d=s(require("../../..")),b=function(e){o(i,p.default);var r=u(i);function i(){return t(this,i),r.apply(this,arguments)}return n(i,[{key:"performFoodSearch",value:function(){}},{key:"perform",value:function(){if(this.bird.energy<y.BIRD_START_HUNGER_ENERGY){var e=d.default.instance.terrain.getSquareAtLocation(this.bird.position);e&&e.foodLevel>0&&(this.bird.landed=!0),this.performFoodSearch()}}},{key:"decrement",value:function(e){if(this.bird.landed){var t=d.default.instance.terrain.getSquareAtLocation(this.bird.position);if(t.foodLevel>0){var r=y.BIRD_EATING_SPEED*e,n=r;r>t.foodLevel&&(n=t.foodLevel),n+this.bird.energy>y.MAX_BIRD_ENERGY&&(n=y.MAX_BIRD_ENERGY-this.bird.energy),t.foodLevel-=n,this.bird.energy+=n}else this.bird.landed=!1}this.bird.energy-=y.ACCELERATION_ENERGY_COST*this.bird.acceleration.magnitude()*e*e+y.LIVING_ENERGY_COST*e}}]),i}();exports.default=b;
},{"../../../Behavior/SelfBehavior":"CgyF","../../../constants":"pOc1","../../..":"WIiV"}],"HUw3":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var e=0;e<i.length;e++){var s=i[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,s){return e&&i(t.prototype,e),s&&i(t,s),t}var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var o=s(require("../Vector2D")),n=require("../constants"),r=require("../helpers"),l=s(require("../Rules/BirdRules/Cohesion")),a=s(require("../Rules/BirdRules/Alignment")),h=s(require("../Rules/BirdRules/Separation")),u=require("../colors"),c=s(require("../Rules/SelfRules/Hunger")),d=function(){function i(e,s,u,d,f){t(this,i),this.boids=e,this.maxX=d,this.maxY=f,this.position=new o.default(s,u);var p=r.fromDegree(360*Math.random());this.velocity=new o.default(Math.cos(p),Math.sin(p)).normalize().multiply(n.BIRD_SPEED),this.acceleration=o.default.ZERO(),this.energy=n.MAX_BIRD_ENERGY/2+n.MAX_BIRD_ENERGY/2*Math.random(),this.birdRules=[new l.default(this),new a.default(this),new h.default(this)],this.selfRules=[new c.default(this)],this.landed=!1}return e(i,[{key:"resetAccumulators",value:function(){this.acceleration.null();for(var t=0;t<this.birdRules.length;t++)this.birdRules[t].reset()}},{key:"performManeuvers",value:function(t){if(this.resetAccumulators(),!this.landed){for(var i=0,e=0;e<t.length;e++)if(!t[e].landed&&t[e]!==this&&t[e].position.distance(this.position)<n.BIRD_VISUAL_RANGE){i+=1;for(var s=0;s<this.birdRules.length;s++)this.birdRules[s].accumulate(t[e])}if(0!==i)for(var o=0;o<this.birdRules.length;o++)this.acceleration.add(this.birdRules[o].perform(i))}this.checkVelocity()}},{key:"performSenses",value:function(){for(var t=0;t<this.selfRules.length;t++)this.selfRules[t].perform()}},{key:"checkBoundary",value:function(){this.position.x1<0?this.position.x1=this.maxX:this.position.x1>this.maxX&&(this.position.x1=0),this.position.x2<0?this.position.x2=this.maxY:this.position.x2>this.maxY&&(this.position.x2=0)}},{key:"checkVelocity",value:function(){this.velocity.magnitude()>n.BIRD_SPEED&&this.velocity.normalize().multiply(n.BIRD_SPEED)}},{key:"die",value:function(){this.boids.birds.splice(this.boids.birds.indexOf(this),1),this.boids.birdLayer.removeEntity(this)}},{key:"update",value:function(t){this.performSenses(),this.performManeuvers(this.boids.birds),this.landed||this.position.add(this.velocity.clone().multiply(t)),this.velocity.add(this.acceleration),this.checkBoundary();for(var i=0;i<this.selfRules.length;i++)this.selfRules[i].decrement(t);this.energy<0&&this.die()}},{key:"render",value:function(t){this.rotate(t),t.strokeStyle=u.BirdColor,t.beginPath(),t.moveTo(this.position.x1+n.BIRD_WIDTH/2,this.position.x2),t.lineTo(this.position.x1-n.BIRD_WIDTH/2,this.position.x2+n.BIRD_HEIGHT/2),t.lineTo(this.position.x1-n.BIRD_WIDTH/2,this.position.x2-n.BIRD_HEIGHT/2),t.closePath(),t.stroke(),this.unrotate(t)}},{key:"rotate",value:function(t){t.translate(this.position.x1,this.position.x2),t.rotate(r.getAngle(this.velocity)),t.translate(-this.position.x1,-this.position.x2)}},{key:"unrotate",value:function(t){t.translate(this.position.x1,this.position.x2),t.rotate(-r.getAngle(this.velocity)),t.translate(-this.position.x1,-this.position.x2)}}]),i}();exports.default=d;
},{"../Vector2D":"Ne1t","../constants":"pOc1","../helpers":"fpaa","../Rules/BirdRules/Cohesion":"Wf9G","../Rules/BirdRules/Alignment":"VT8H","../Rules/BirdRules/Separation":"hmNX","../colors":"tgyE","../Rules/SelfRules/Hunger":"tvWH"}],"uAOG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){if(void 0===t&&(t={}),t.hasOwnProperty("amplitude")){if("number"!=typeof t.amplitude)throw new Error("options.amplitude must be a number");this.amplitude=t.amplitude}else this.amplitude=1;if(t.hasOwnProperty("frequency")){if("number"!=typeof t.frequency)throw new Error("options.frequency must be a number");this.frequency=t.frequency}else this.frequency=1;if(t.hasOwnProperty("octaves")){if("number"!=typeof t.octaves||!isFinite(t.octaves)||Math.floor(t.octaves)!==t.octaves)throw new Error("options.octaves must be an integer");this.octaves=t.octaves}else this.octaves=1;if(t.hasOwnProperty("persistence")){if("number"!=typeof t.persistence)throw new Error("options.persistence must be a number");this.persistence=t.persistence}else this.persistence=.5;if(t.hasOwnProperty("random")){if("function"!=typeof t.random)throw new Error("options.random must be a function");this.random=t.random}else this.random=Math.random;var e,r;if(t.hasOwnProperty("min")){if("number"!=typeof t.min)throw new Error("options.min must be a number");e=t.min}else e=-1;if(t.hasOwnProperty("max")){if("number"!=typeof t.max)throw new Error("options.max must be a number");r=t.max}else r=1;if(e>=r)throw new Error("options.min ("+e+") must be less than options.max ("+r+")");this.scale=-1===e&&1===r?function(t){return t}:function(t){return e+(t+1)/2*(r-e)};for(var s,i,o=new Uint8Array(256),h=0;h<256;h++)o[h]=h;for(h=255;h>0;h--)s=Math.floor((h+1)*this.random()),i=o[h],o[h]=o[s],o[s]=i;this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(h=0;h<512;h++)this.perm[h]=o[255&h],this.permMod12[h]=this.perm[h]%12}return t.prototype.cylindrical=function(t,e){switch(e.length){case 2:return this.cylindrical2D(t,e[0],e[1]);case 3:return this.cylindrical3D(t,e[0],e[1],e[2]);default:return null}},t.prototype.cylindrical2D=function(t,e,r){var s=e/t,i=t/(2*Math.PI),o=2*s*Math.PI,h=i*Math.sin(o),n=i*Math.cos(o);return this.scaled3D(h,n,r)},t.prototype.cylindrical3D=function(t,e,r,s){var i=e/t,o=t/(2*Math.PI),h=2*i*Math.PI,n=o*Math.sin(h),a=o*Math.cos(h);return this.scaled4D(n,a,r,s)},t.prototype.dot=function(t,e){return t.slice(0,Math.min(t.length,e.length)).reduce(function(t,r,s){return t+r*e[s]},0)},t.prototype.raw=function(t){switch(t.length){case 2:return this.raw2D(t[0],t[1]);case 3:return this.raw3D(t[0],t[1],t[2]);case 4:return this.raw4D(t[0],t[1],t[2],t[3]);default:return null}},t.prototype.raw2D=function(e,r){var s=.5*(e+r)*(Math.sqrt(3)-1),i=Math.floor(e+s),o=Math.floor(r+s),h=(i+o)*t.G2,n=e-(i-h),a=r-(o-h),p=n>a?1:0,c=n>a?0:1,u=n-p+t.G2,m=a-c+t.G2,l=n-1+2*t.G2,f=a-1+2*t.G2,d=255&i,M=255&o,D=this.permMod12[d+this.perm[M]],w=this.permMod12[d+p+this.perm[M+c]],G=this.permMod12[d+1+this.perm[M+1]],y=.5-n*n-a*a,v=.5-u*u-m*m,b=.5-l*l-f*f;return 70.14805770653952*((y<0?0:Math.pow(y,4)*this.dot(t.GRAD3D[D],[n,a]))+(v<0?0:Math.pow(v,4)*this.dot(t.GRAD3D[w],[u,m]))+(b<0?0:Math.pow(b,4)*this.dot(t.GRAD3D[G],[l,f])))},t.prototype.raw3D=function(e,r,s){var i,o,h,n,a,p,c=(e+r+s)/3,u=Math.floor(e+c),m=Math.floor(r+c),l=Math.floor(s+c),f=(u+m+l)*t.G3,d=e-(u-f),M=r-(m-f),D=s-(l-f);d>=M?M>=D?(i=n=a=1,o=h=p=0):d>=D?(i=n=p=1,o=h=a=0):(h=n=p=1,i=o=a=0):M<D?(h=a=p=1,i=o=n=0):d<D?(o=a=p=1,i=h=n=0):(o=n=a=1,i=h=p=0);var w=d-i+t.G3,G=M-o+t.G3,y=D-h+t.G3,v=d-n+2*t.G3,b=M-a+2*t.G3,P=D-p+2*t.G3,A=d-1+3*t.G3,R=M-1+3*t.G3,q=D-1+3*t.G3,I=255&u,E=255&m,O=255&l,g=this.permMod12[I+this.perm[E+this.perm[O]]],x=this.permMod12[I+i+this.perm[E+o+this.perm[O+h]]],U=this.permMod12[I+n+this.perm[E+a+this.perm[O+p]]],_=this.permMod12[I+1+this.perm[E+1+this.perm[O+1]]],j=.5-d*d-M*M-D*D,F=.5-w*w-G*G-y*y,k=.5-v*v-b*b-P*P,z=.5-A*A-R*R-q*q;return 94.68493150681972*((j<0?0:Math.pow(j,4)*this.dot(t.GRAD3D[g],[d,M,D]))+(F<0?0:Math.pow(F,4)*this.dot(t.GRAD3D[x],[w,G,y]))+(k<0?0:Math.pow(k,4)*this.dot(t.GRAD3D[U],[v,b,P]))+(z<0?0:Math.pow(z,4)*this.dot(t.GRAD3D[_],[A,R,q])))},t.prototype.raw4D=function(e,r,s,i){var o=(e+r+s+i)*(Math.sqrt(5)-1)/4,h=Math.floor(e+o),n=Math.floor(r+o),a=Math.floor(s+o),p=Math.floor(i+o),c=(h+n+a+p)*t.G4,u=e-(h-c),m=r-(n-c),l=s-(a-c),f=i-(p-c),d=0,M=0,D=0,w=0;u>m?d++:M++,u>l?d++:D++,u>f?d++:w++,m>l?M++:D++,m>f?M++:w++,l>f?D++:w++;var G=d>=3?1:0,y=M>=3?1:0,v=D>=3?1:0,b=w>=3?1:0,P=d>=2?1:0,A=M>=2?1:0,R=D>=2?1:0,q=w>=2?1:0,I=d>=1?1:0,E=M>=1?1:0,O=D>=1?1:0,g=w>=1?1:0,x=u-G+t.G4,U=m-y+t.G4,_=l-v+t.G4,j=f-b+t.G4,F=u-P+2*t.G4,k=m-A+2*t.G4,z=l-R+2*t.G4,B=f-q+2*t.G4,C=u-I+3*t.G4,H=m-E+3*t.G4,J=l-O+3*t.G4,K=f-g+3*t.G4,L=u-1+4*t.G4,N=m-1+4*t.G4,Q=l-1+4*t.G4,S=f-1+4*t.G4,T=255&h,V=255&n,W=255&a,X=255&p,Y=this.perm[T+this.perm[V+this.perm[W+this.perm[X]]]]%32,Z=this.perm[T+G+this.perm[V+y+this.perm[W+v+this.perm[X+b]]]]%32,$=this.perm[T+P+this.perm[V+A+this.perm[W+R+this.perm[X+q]]]]%32,tt=this.perm[T+I+this.perm[V+E+this.perm[W+O+this.perm[X+g]]]]%32,et=this.perm[T+1+this.perm[V+1+this.perm[W+1+this.perm[X+1]]]]%32,rt=.5-u*u-m*m-l*l-f*f,st=.5-x*x-U*U-_*_-j*j,it=.5-F*F-k*k-z*z-B*B,ot=.5-C*C-H*H-J*J-K*K,ht=.5-L*L-N*N-Q*Q-S*S;return 72.37855765153665*((rt<0?0:Math.pow(rt,4)*this.dot(t.GRAD4D[Y],[u,m,l,f]))+(st<0?0:Math.pow(st,4)*this.dot(t.GRAD4D[Z],[x,U,_,j]))+(it<0?0:Math.pow(it,4)*this.dot(t.GRAD4D[$],[F,k,z,B]))+(ot<0?0:Math.pow(ot,4)*this.dot(t.GRAD4D[tt],[C,H,J,K]))+(ht<0?0:Math.pow(ht,4)*this.dot(t.GRAD4D[et],[L,N,Q,S])))},t.prototype.scaled=function(t){switch(t.length){case 2:return this.scaled2D(t[0],t[1]);case 3:return this.scaled3D(t[0],t[1],t[2]);case 4:return this.scaled4D(t[0],t[1],t[2],t[3]);default:return null}},t.prototype.scaled2D=function(t,e){for(var r=this.amplitude,s=this.frequency,i=0,o=0,h=0;h<this.octaves;h++)o+=this.raw2D(t*s,e*s)*r,i+=r,r*=this.persistence,s*=2;return this.scale(o/i)},t.prototype.scaled3D=function(t,e,r){for(var s=this.amplitude,i=this.frequency,o=0,h=0,n=0;n<this.octaves;n++)h+=this.raw3D(t*i,e*i,r*i)*s,o+=s,s*=this.persistence,i*=2;return this.scale(h/o)},t.prototype.scaled4D=function(t,e,r,s){for(var i=this.amplitude,o=this.frequency,h=0,n=0,a=0;a<this.octaves;a++)n+=this.raw4D(t*o,e*o,r*o,s*o)*i,h+=i,i*=this.persistence,o*=2;return this.scale(n/h)},t.prototype.spherical=function(t,e){switch(e.length){case 3:return this.spherical3D(t,e[0],e[1],e[2]);case 2:return this.spherical2D(t,e[0],e[1]);default:return null}},t.prototype.spherical2D=function(t,e,r){var s=r/t,i=2*(e/t)*Math.PI,o=s*Math.PI,h=Math.sin(o+Math.PI),n=2*Math.PI,a=n*Math.sin(i)*h,p=n*Math.cos(i)*h,c=n*Math.cos(o);return this.scaled3D(a,p,c)},t.prototype.spherical3D=function(t,e,r,s){var i=r/t,o=2*(e/t)*Math.PI,h=i*Math.PI,n=Math.sin(h+Math.PI),a=2*Math.PI,p=a*Math.sin(o)*n,c=a*Math.cos(o)*n,u=a*Math.cos(h);return this.scaled4D(p,c,u,s)},t.G2=(3-Math.sqrt(3))/6,t.G3=1/6,t.G4=(5-Math.sqrt(5))/20,t.GRAD3D=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,-1],[0,1,-1],[0,-1,-1]],t.GRAD4D=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],t}();exports.default=t;
},{}],"Y6nc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./types");exports.SQUARE_SIZE=6,exports.SQUARE_FOODS=new Map([[e.SquareType.DEEP_WATER,0],[e.SquareType.SHORE_WATER,0],[e.SquareType.SWAMP,250],[e.SquareType.SAND,50],[e.SquareType.GRASSLAND,250],[e.SquareType.RAIN_FOREST,1e3],[e.SquareType.MOUNTAIN,50],[e.SquareType.SNOW_PEAK,0]]),exports.SQUARE_TERRAIN_DEFINITIONS=new Map([[e.SquareType.DEEP_WATER,{height:{min:0,max:.35},moisture:{min:0,max:1},humidity:{min:0,max:1}}],[e.SquareType.SHORE_WATER,{height:{min:.35,max:.45},moisture:{min:0,max:.7},humidity:{min:0,max:1}}],[e.SquareType.SWAMP,{height:{min:.35,max:.45},moisture:{min:.7,max:1},humidity:{min:0,max:1}}],[e.SquareType.SAND,{height:{min:.45,max:.7},moisture:{min:0,max:.4},humidity:{min:0,max:1}}],[e.SquareType.GRASSLAND,{height:{min:.45,max:.7},moisture:{min:.4,max:.7},humidity:{min:0,max:1}}],[e.SquareType.RAIN_FOREST,{height:{min:.45,max:.7},moisture:{min:.7,max:1},humidity:{min:0,max:1}}],[e.SquareType.MOUNTAIN,{height:{min:.7,max:.8},moisture:{min:0,max:1},humidity:{min:0,max:1}}],[e.SquareType.SNOW_PEAK,{height:{min:.8,max:1},moisture:{min:0,max:1},humidity:{min:0,max:1}}]]);
},{"./types":"Fdbi"}],"JFiQ":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("../constants"),i=require("../../colors"),o=function(){function t(r,i,o){e(this,t),this.x=r,this.y=i,this.type=o,this.foodLevel=n.SQUARE_FOODS.get(this.type)||0}return r(t,[{key:"render",value:function(e){e.fillStyle=i.SquareColors[this.type],e.fillRect(this.x*n.SQUARE_SIZE,this.y*n.SQUARE_SIZE,n.SQUARE_SIZE,n.SQUARE_SIZE)}}]),t}();exports.default=o;
},{"../constants":"Y6nc","../../colors":"tgyE"}],"G5Ln":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function r(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var a=require("@zacktherrien/typescript-render-engine"),n=i(require("../../../node_modules/fast-simplex-noise/src")),s=i(require("./Square")),u=require("../constants"),h=require("./constants"),o=function(){function t(){e(this,t),this.layer=new a.RenderingLayer(u.LayerIndex.BACKGROUND,a.LayerType.STATIC),this.heightMap=new n.default({frequency:.01,max:1,min:0,octaves:4}),this.humidityMap=new n.default({frequency:.01,max:1,min:0,octaves:8}),this.moistureMap=new n.default({frequency:.01,max:1,min:0,octaves:8}),this.squares=[],this.initSquares()}return r(t,[{key:"initSquares",value:function(){for(var e,t=this.layer.getWidth(),r=this.layer.getHeight(),i=Math.ceil(t/h.SQUARE_SIZE),a=Math.ceil(r/h.SQUARE_SIZE),n=[],u=0;u<a;u++){n=[];for(var o=0;o<i;o++)e=new s.default(o,u,this.getTerrainType(o,u)),n.push(e),this.layer.addEntity(e);this.squares.push(n)}}},{key:"getSquareAtLocation",value:function(e){var t=Math.floor(e.x2/h.SQUARE_SIZE),r=Math.floor(e.x1/h.SQUARE_SIZE);return this.squares[0].length,this.squares.length,!this.squares||!this.squares[t]||this.squares[t][r],this.squares[t][r]}},{key:"getTerrainType",value:function(e,t){var r=this.heightMap.scaled2D(e,t),i=this.humidityMap.scaled2D(e,t),a=this.moistureMap.scaled2D(e,t);return this.squareTypeFromHeight(r,i,a)}},{key:"squareTypeFromHeight",value:function(e,t,r){var i=null;if(h.SQUARE_TERRAIN_DEFINITIONS.forEach(function(a,n){e>=a.height.min&&e<=a.height.max&&t>=a.humidity.min&&t<=a.humidity.max&&r>=a.moisture.min&&r<=a.moisture.max&&(i=n)}),null===i)throw new Error;return i}}]),t}();exports.default=o;
},{"@zacktherrien/typescript-render-engine":"Uo8W","../../../node_modules/fast-simplex-noise/src":"uAOG","./Square":"JFiQ","../constants":"pOc1","./constants":"Y6nc"}],"WIiV":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var s=n(require("@zacktherrien/typescript-render-engine")),a=require("./constants"),o=r(require("./Bird")),u=r(require("./Vector2D")),d=r(require("./Terrain")),h=function(){function t(){e(this,t),t.instance=this,this.terrain=new d.default,this.birdLayer=new s.RenderingLayer(a.LayerIndex.BIRDS,s.LayerType.DYNAMIC),this.birds=[];for(var i=0;i<a.BIRD_COUNT;i++){var n=new o.default(this,Math.random()*this.birdLayer.getWidth(),Math.random()*this.birdLayer.getHeight(),this.birdLayer.getWidth(),this.birdLayer.getHeight());this.birds.push(n),this.birdLayer.addEntity(n)}this.isLeftClicked=!1,this.isRightClicked=!1,this.mouseLocation=u.default.ZERO(),this.engine=new s.default,this.engine.registerLayer(this.terrain.layer),this.engine.registerLayer(this.birdLayer),this.engine.start(),this.terrain.layer.render(),document.addEventListener("mousedown",this.handleMouseDown.bind(this)),document.addEventListener("mouseup",this.handleMouseUp.bind(this)),document.addEventListener("mousemove",this.handleMouseMove.bind(this)),document.addEventListener("contextmenu",function(e){return e.preventDefault()})}return i(t,[{key:"handleMouseDown",value:function(e){0===e.button?this.isLeftClicked=!0:(this.isRightClicked=!0,e.preventDefault(),e.stopImmediatePropagation()),this.mouseLocation=new u.default(e.offsetX,e.offsetY)}},{key:"handleMouseMove",value:function(e){this.mouseLocation=new u.default(e.offsetX,e.offsetY)}},{key:"handleMouseUp",value:function(){this.isLeftClicked=!1,this.isRightClicked=!1,this.mouseLocation=u.default.ZERO()}}]),t}();exports.default=h;
},{"@zacktherrien/typescript-render-engine":"Uo8W","./constants":"pOc1","./Bird":"HUw3","./Vector2D":"Ne1t","./Terrain":"G5Ln"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("./Boids"));function i(){var e=new t.default;window.boids=e}window.addEventListener("load",i);
},{"./Boids":"WIiV"}]},{},["QCba"], null)
//# sourceMappingURL=/boids/src.a87d7661.js.map